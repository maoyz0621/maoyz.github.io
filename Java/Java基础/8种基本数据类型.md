# åŸºæœ¬ç±»å‹å’ŒString

## String

### é•¿åº¦

+ length()   å­—ç¬¦é•¿åº¦

+ codePointCount()   ä»£ç ç‚¹æ•°

  ```java
  public void testStringLength() {
      String str1 = "ä½ å¥½";
      String str2 = "nihao";
      // 2
      System.out.println(str1.length());
      // 5
      System.out.println(str2.length());
      String str3 = "ğ„";
      // 2
      System.out.println(str3.length());
      // ä»£ç ç‚¹æ•° -> 1
      System.out.println(str3.codePointCount(0, str3.length()));
  
      String str4 = "\uD834\uDD1E";
      // ğ„
      System.out.println(str4);
  }
  ```



Javaä¸­ æœ‰å†…ç å’Œå¤–ç è¿™ä¸€åŒºåˆ†ç®€å•æ¥è¯´

- å†…ç ï¼šcharæˆ–Stringåœ¨å†…å­˜é‡Œä½¿ç”¨çš„ç¼–ç æ–¹å¼ã€‚
- å¤–ç ï¼šé™¤äº†å†…ç éƒ½å¯ä»¥è®¤ä¸ºæ˜¯â€œå¤–ç â€ã€‚ï¼ˆåŒ…æ‹¬classæ–‡ä»¶çš„ç¼–ç ï¼‰



javaå†…ç ï¼šunicodeï¼ˆutf-16ï¼‰ä¸­ä½¿ç”¨çš„æ˜¯utf-16ï¼›è¿”å›å­—ç¬¦ä¸²çš„é•¿åº¦ï¼Œè¿™ä¸€é•¿åº¦ç­‰äºå­—ç¬¦ä¸²ä¸­çš„UTF-16çš„ä»£ç å•å…ƒçš„æ•°ç›®

## Integer

é™æ€å†…éƒ¨ç±»IntegreCacheï¼Œå­˜å‚¨ï¼ˆhigh - lowï¼‰ä¸ªé™æ€Integerå¯¹è±¡ï¼Œlow = -128ï¼Œhighä¸€èˆ¬é»˜è®¤127ï¼Œ-XX:AutoBoxCacheMax=<size> å½±å“ç¼“å­˜çš„æœ€å¤§å€¼ï¼Œä¸€èˆ¬ä¸åšä¿®æ”¹ï¼Œ127è½¬åŒ–äºŒçº§åˆ¶**1111111**

```java
private static class IntegerCache {
    static final int low = -128;
    static final int high;
    static final Integer cache[];

    static {
        // high value may be configured by property
        int h = 127;
        String integerCacheHighPropValue =
            sun.misc.VM.getSavedProperty("java.lang.Integer.IntegerCache.high");
        if (integerCacheHighPropValue != null) {
            try {
                int i = parseInt(integerCacheHighPropValue);
                i = Math.max(i, 127);
                // Maximum array size is Integer.MAX_VALUE
                h = Math.min(i, Integer.MAX_VALUE - (-low) -1);
            } catch( NumberFormatException nfe) {
                // If the property cannot be parsed into an int, ignore it.
            }
        }
        high = h;

        cache = new Integer[(high - low) + 1];
        int j = low;
        for(int k = 0; k < cache.length; k++)
            cache[k] = new Integer(j++);

        // range [-128, 127] must be interned (JLS7 5.1.7)
        assert IntegerCache.high >= 127;
    }

    private IntegerCache() {}
}
```

é‰´äºæ­¤ï¼Œå°±å¯ä»¥è§£é‡Šï¼š

```java
    /*
     * [-127,128]ä¹‹é—´çš„å€¼ä»ç„¶å½“æˆåŸºæœ¬æ•°æ®ç±»å‹å¤„ç†
     * åŒ…è£…ç±»ç›¸ç­‰åˆ¤æ–­ä½¿ç”¨equal()
     */
    Integer i3 = 127;
    Integer i4 = 127;
    // true
    System.out.println(i3 == i4);
    // true
    System.out.println(i3.equals(i4));

    Integer i5 = 128;
    Integer i6 = 128;
    // false
    System.out.println(i5 == i6);
    // true
    System.out.println(i5.equals(i6));
```