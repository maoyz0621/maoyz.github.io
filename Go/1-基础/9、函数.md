# import导包和函数

## 导包

### 正常导包

```go
import "fmt"
```

### 导入多个包

```go
// 建议
import (
	"pk1"
	"pkg2"
)
或
import "pk1"
import "pk1"
```

### 导入包但不使用

当import某个pkg，只想使用其中的init()方法，但不使用其它方法时，起一个别名，匿名

```go
import (
    // 别名，匿名_
	_ "pk1"
	"pkg2"
)
```

### 别名包名

```go
import (
	"pk1"
    // 别名，mypkg
	mypkg "pkg2"
)

// 调用
// pkg2.f1()
mypkg.f1()
```

### 直接导入到本类中

```go
// 不建议使用，同名歧义
import (
	"pk1"
	. "pkg2"
)

// 调用
// pkg2.f1()
f1()
```



## 函数

### 函数的初始化init

函数的执行顺序：import pkg -> const -> var -> init() -> ... -> main() -> Exit

```go
// 包中提供的初始化方法，优先执行
func init() {
   fmt.Println("================ 开始init ===============")
}
```



### 函数多返回值

#### 1个返回值

```go
// 1、返回值 int
func func1(a string, b int) int {
   return b + 1
}
```

#### 多个返回值，匿名

```go
// 2、多个返回值，匿名
func func2(a string, b int) (int, string) {
   return b, a
}
```

#### 多返回值，有形参名称，返回

```go
// 3、多返回值，有形参名称，返回
func func3(a string, b int) (r1 int, r2 string) {

   // 返回值赋值
   r1 = b + 10
   r2 = a + "123"

   return
}
```

#### 多返回值(相同类型)，有形参名称

```go
// 4、多返回值(相同类型)，有形参名称
func func4(a string, b int) (r1, r2 string) {

   // 返回值赋值
   r1 = "abc"
   r2 = a + "123"

   return
}
```



### 匿名函数



### 闭包



### defer

defer，延迟函数，释放资源，释放锁，关闭文件流，关闭链接；捕获panic

defer函数要紧跟在资源打开后面，否者defer可能得不到执行，导致内存泄漏

#### 多个defer执行顺序

LIFO，后入先出，可以理解为栈结构

> defer，return，return value（函数返回值） 执行顺序：
>
> 首先return，
>
> 其次return value，
>
> 最后defer。
>
> defer可以修改函数最终返回值，修改时机：**有名返回值或者函数返回指针**

